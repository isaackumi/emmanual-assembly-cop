(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{5817:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6142:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7472:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},9883:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9409:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2245:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},2560:function(e,s,a){Promise.resolve().then(a.bind(a,8567))},8567:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return k}});var r=a(7437),l=a(2265),t=a(4033),i=a(9477),c=a(7815),n=a(5754),d=a(5179),o=a(1478),x=a(4599),m=a(9409),h=a(5750),u=a(7972),p=a(2245);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,a(2898).Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var f=a(3067),j=a(5817),y=a(9883),b=a(1827),N=a(9670),v=a(9617),w=a(7472),Z=a(8203),_=a(6142);function k(){let{user:e,loading:s}=(0,i.useAuth)(),a=(0,t.useRouter)(),k=(0,x.e)(),[z,C]=(0,l.useState)([]),[S,G]=(0,l.useState)(!0),[M,E]=(0,l.useState)(""),[F,Y]=(0,l.useState)("all");(0,l.useEffect)(()=>{s||e||a.push("/auth")},[e,s,a]),(0,l.useEffect)(()=>{e&&q()},[e]);let q=async()=>{try{G(!0),console.log("Fetching groups...");let{data:e,error:s}=await k.from("groups").select("\n          *,\n          leader:app_users!leader_id(full_name, membership_id),\n          co_leader:app_users!co_leader_id(full_name, membership_id)\n        ").eq("is_active",!0).order("name",{ascending:!0});if(s)throw console.error("Error fetching groups:",s),s;console.log("Groups fetched:",e),C(e||[])}catch(e){console.error("Error fetching groups:",e)}finally{G(!1)}},L=z.filter(e=>{var s,a;let r=""===M||(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(M.toLowerCase()))||(null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(M.toLowerCase())),l="all"===F||e.group_type===F;return r&&l}),A=e=>{switch(e){case"ministry":return"bg-purple-100 text-purple-800";case"fellowship":return"bg-blue-100 text-blue-800";case"age_group":return"bg-green-100 text-green-800";case"special_interest":return"bg-yellow-100 text-yellow-800";case"leadership":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},I=e=>{switch(e){case"ministry":return(0,r.jsx)(m.Z,{className:"h-4 w-4"});case"fellowship":default:return(0,r.jsx)(h.Z,{className:"h-4 w-4"});case"age_group":return(0,r.jsx)(u.Z,{className:"h-4 w-4"});case"special_interest":return(0,r.jsx)(p.Z,{className:"h-4 w-4"});case"leadership":return(0,r.jsx)(g,{className:"h-4 w-4"})}};return s||S?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,s)=>(0,r.jsx)("div",{className:"h-48 bg-gray-200 rounded"},s))})]})})}):e?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center mb-2",children:(0,r.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>a.push("/dashboard"),className:"mr-3 text-gray-600 hover:text-gray-900",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Groups & Ministries"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage church groups, ministries, and fellowships"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(n.z,{variant:"outline",className:"flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,r.jsxs)(n.z,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>a.push("/groups/add"),children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Create Group"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)(c.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,r.jsx)(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Total Groups"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:z.length})]}),(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-blue-600"})})]})})}),(0,r.jsx)(c.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,r.jsx)(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Ministries"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:z.filter(e=>"ministry"===e.group_type).length})]}),(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"h-5 w-5 text-purple-600"})})]})})}),(0,r.jsx)(c.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,r.jsx)(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Fellowships"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:z.filter(e=>"fellowship"===e.group_type).length})]}),(0,r.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-green-600"})})]})})}),(0,r.jsx)(c.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,r.jsx)(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Age Groups"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:z.filter(e=>"age_group"===e.group_type).length})]}),(0,r.jsx)("div",{className:"w-10 h-10 bg-yellow-50 rounded-lg flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"h-5 w-5 text-yellow-600"})})]})})})]}),(0,r.jsx)(c.Zb,{className:"mb-6",children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)(d.I,{placeholder:"Search groups by name or description...",value:M,onChange:e=>E(e.target.value),className:"pl-10"})]})}),(0,r.jsx)("div",{className:"flex items-center space-x-3",children:(0,r.jsxs)("select",{value:F,onChange:e=>Y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Types"}),(0,r.jsx)("option",{value:"ministry",children:"Ministry"}),(0,r.jsx)("option",{value:"fellowship",children:"Fellowship"}),(0,r.jsx)("option",{value:"age_group",children:"Age Group"}),(0,r.jsx)("option",{value:"special_interest",children:"Special Interest"}),(0,r.jsx)("option",{value:"leadership",children:"Leadership"})]})})]})})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>(0,r.jsxs)(c.Zb,{className:"bg-white shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,r.jsxs)(c.Ol,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:I(e.group_type)}),(0,r.jsx)(o.C,{className:A(e.group_type),children:e.group_type.replace("_"," ")})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>a.push("/groups/".concat(e.id)),children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})}),(0,r.jsx)(n.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(v.Z,{className:"h-4 w-4"})}),(0,r.jsx)(n.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(w.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(c.ll,{className:"text-lg",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,r.jsxs)(c.aY,{className:"space-y-3",children:[(e.leader||e.co_leader)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Leadership"}),(0,r.jsxs)("div",{className:"space-y-1",children:[e.leader&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(g,{className:"h-3 w-3 text-yellow-600"}),(0,r.jsx)("span",{className:"text-sm",children:e.leader.full_name})]}),e.co_leader&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.Z,{className:"h-3 w-3 text-blue-600"}),(0,r.jsx)("span",{className:"text-sm",children:e.co_leader.full_name})]})]})]}),e.meeting_schedule&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,r.jsx)(Z.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.meeting_schedule})]}),e.meeting_location&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,r.jsx)(_.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.meeting_location})]}),e.max_members&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Capacity"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.max_members," members"]})]})]})]},e.id))}),0===L.length&&(0,r.jsx)(c.Zb,{className:"mt-6",children:(0,r.jsxs)(c.aY,{className:"text-center py-12",children:[(0,r.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No groups found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:M||"all"!==F?"Try adjusting your search or filter criteria.":"Get started by creating your first group."}),(0,r.jsxs)(n.z,{className:"bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Create Group"]})]})})]})}):null}},5179:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var r=a(7437),l=a(2265),t=a(1657);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,r.jsx)("input",{type:l,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});i.displayName="Input"}},function(e){e.O(0,[895,833,372,971,938,744],function(){return e(e.s=2560)}),_N_E=e.O()}]);