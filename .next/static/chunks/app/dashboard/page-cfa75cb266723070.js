(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2457:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3021:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},8253:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},8203:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1298:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6637:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6643:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},7810:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},5883:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},1295:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},8004:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},2882:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},612:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},2790:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},9409:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5790:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},7972:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5750:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},655:function(e,s,t){Promise.resolve().then(t.bind(t,1410))},1410:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return O}});var a=t(7437),l=t(2265),r=t(4033),n=t(9477),i=t(7815),c=t(8253),d=t(7972),o=t(2457),x=t(5750),h=t(8203),m=t(2790),u=t(612),g=t(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,g.Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);var p=t(1298);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,g.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),j=(0,g.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var b=t(6637),v=t(2882),N=t(1295),w=t(3021);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,g.Z)("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Z=(0,g.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_=(0,g.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),M=(0,g.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var S=t(6643),F=t(9409);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Y=(0,g.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);var A=t(5883),D=t(8004),C=t(5790);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let E=(0,g.Z)("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]),z=(0,g.Z)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);var G=t(7810),I=t(4599);function O(){var e,s;let{user:t,loading:g}=(0,n.useAuth)(),[O,T]=(0,l.useState)(null),[U,L]=(0,l.useState)(null),[q,H]=(0,l.useState)(null),[V,P]=(0,l.useState)([]),[R,B]=(0,l.useState)(!0),[W,J]=(0,l.useState)(!0),Q=(0,I.e)(),K=(0,r.useRouter)(),X=e=>{let s=new Date,t={male:0,female:0},a={"0-17":0,"18-25":0,"26-35":0,"36-50":0,"51-65":0,"65+":0},l={},r={};return e.forEach(e=>{var n;if("male"===e.gender?t.male++:"female"===e.gender&&t.female++,e.dob){let t=s.getFullYear()-new Date(e.dob).getFullYear();t<=17?a["0-17"]++:t<=25?a["18-25"]++:t<=35?a["26-35"]++:t<=50?a["36-50"]++:t<=65?a["51-65"]++:a["65+"]++}let i=(null===(n=e.user)||void 0===n?void 0:n.marital_status)||"unknown";if(l[i]=(l[i]||0)+1,e.dob){let t=s.getFullYear()-new Date(e.dob).getFullYear();t<=17?r.Children=(r.Children||0)+1:t<=35?r.Youth=(r.Youth||0)+1:"male"===e.gender?r["Men Fellowship"]=(r["Men Fellowship"]||0)+1:r["Women Fellowship"]=(r["Women Fellowship"]||0)+1}}),{gender:t,ageGroups:a,maritalStatus:l,groups:r}};console.log("Dashboard - Auth state:",{user:t,authLoading:g}),(0,l.useEffect)(()=>{g||t||K.push("/auth")},[t,g,K]),(0,l.useEffect)(()=>{t&&$()},[t]);let $=async()=>{if(t)try{let{data:e,error:s}=await Q.from("members").select("*").eq("user_id",t.id).single();!s&&e&&T(e),await ee(),await es()}catch(e){console.error("Error fetching dashboard data:",e)}finally{B(!1)}},ee=async()=>{if(t)try{let e=new Date().toISOString().split("T")[0],s=new Date;s.setDate(s.getDate()-s.getDay());let a=new Date;a.setMonth(a.getMonth(),1);let l=Q.from("attendance").select("id, service_date, member_id, dependant_id");if("member"===t.role){let{data:e}=await Q.from("members").select("id").eq("user_id",t.id).single();e&&(l=l.eq("member_id",e.id))}let{data:r}=await l,{data:n}=await Q.from("members").select("\n          *,\n          user:app_users(full_name, membership_id, phone, email, role, marital_status, created_at)\n        ").eq("is_active",!0),i=null;if(["admin","finance_officer","pastor"].includes(t.role)){let{data:e}=await Q.from("donations").select("amount, donation_date").gte("donation_date",a.toISOString().split("T")[0]);i=e}let{data:c}=await Q.from("members").select("dob, date_of_baptism, date_of_holy_ghost_baptism").not("dob","is",null),d=new Date,o=new Date(d.getTime()+2592e6),x=0,h=0;c&&c.forEach(e=>{if(e.dob){let s=new Date(e.dob);s.setFullYear(d.getFullYear()),s<d&&s.setFullYear(d.getFullYear()+1),s>=d&&s<=o&&x++}if(e.date_of_baptism){let s=new Date(e.date_of_baptism);s.setFullYear(d.getFullYear()),s<d&&s.setFullYear(d.getFullYear()+1),s>=d&&s<=o&&h++}if(e.date_of_holy_ghost_baptism){let s=new Date(e.date_of_holy_ghost_baptism);s.setFullYear(d.getFullYear()),s<d&&s.setFullYear(d.getFullYear()+1),s>=d&&s<=o&&h++}});let m=(null==n?void 0:n.length)||0,u=(null==n?void 0:n.filter(e=>"active"===e.status).length)||0,g=(null==r?void 0:r.filter(s=>s.service_date===e).length)||0,f=(null==r?void 0:r.filter(e=>e.service_date>=s.toISOString().split("T")[0]).length)||0,p=(null==i?void 0:i.reduce((e,s)=>e+s.amount,0))||0;L({total_members:m,active_members:u,visitors:0,today_attendance:g,weekly_attendance:f,monthly_donations:p,pending_pledges:0,prayer_requests:0,upcoming_birthdays:x,upcoming_anniversaries:h});let y=X(n||[]);H(y)}catch(e){console.error("Error fetching stats:",e)}},es=async()=>{if(t)try{let e=new Date,s=new Date(e.getTime()+2592e6),{data:t,error:a}=await Q.from("members").select("\n          dob,\n          date_of_baptism,\n          date_of_holy_ghost_baptism,\n          user:app_users!inner (\n            full_name,\n            phone,\n            first_name,\n            last_name\n          )\n        ").not("dob","is",null);if(a){console.error("Error fetching upcoming events:",a);return}let l=[];t&&t.forEach(t=>{let a=t.user,r=(null==a?void 0:a.full_name)||"".concat((null==a?void 0:a.first_name)||""," ").concat((null==a?void 0:a.last_name)||"").trim(),n=null==a?void 0:a.phone;if(t.dob){let a=new Date(t.dob);if(a.setFullYear(e.getFullYear()),a<e&&a.setFullYear(e.getFullYear()+1),a>=e&&a<=s){let s=Math.ceil((a.getTime()-e.getTime())/864e5);l.push({type:"birthday",name:r,phone:n,date:a,daysUntil:s,displayDate:a.toLocaleDateString("en-US",{month:"short",day:"numeric"})})}}if(t.date_of_baptism){let a=new Date(t.date_of_baptism);if(a.setFullYear(e.getFullYear()),a<e&&a.setFullYear(e.getFullYear()+1),a>=e&&a<=s){let s=Math.ceil((a.getTime()-e.getTime())/864e5);l.push({type:"baptism_anniversary",name:r,phone:n,date:a,daysUntil:s,displayDate:a.toLocaleDateString("en-US",{month:"short",day:"numeric"})})}}if(t.date_of_holy_ghost_baptism){let a=new Date(t.date_of_holy_ghost_baptism);if(a.setFullYear(e.getFullYear()),a<e&&a.setFullYear(e.getFullYear()+1),a>=e&&a<=s){let s=Math.ceil((a.getTime()-e.getTime())/864e5);l.push({type:"holy_ghost_anniversary",name:r,phone:n,date:a,daysUntil:s,displayDate:a.toLocaleDateString("en-US",{month:"short",day:"numeric"})})}}}),l.sort((e,s)=>e.date.getTime()-s.date.getTime()),P(l.slice(0,10))}catch(e){console.error("Error fetching upcoming events:",e)}};return g||R?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("div",{className:"w-72 bg-gradient-to-b from-blue-900 to-blue-800 text-white flex flex-col",children:[(0,a.jsx)("div",{className:"p-6 border-b border-blue-700",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-8",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-2xl flex items-center justify-center shadow-lg",children:(0,a.jsx)(c.Z,{className:"h-8 w-8 text-blue-900"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-bold text-xl",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Church of Pentecost"}),(0,a.jsx)("p",{className:"text-blue-200 text-sm",children:"Emmanuel Assembly"}),(0,a.jsx)("p",{className:"text-yellow-300 text-xs font-medium",children:"Odorkor Area, Gbawe CP District"})]})]})}),(0,a.jsxs)("div",{className:"animate-pulse p-4",children:[(0,a.jsx)("div",{className:"h-8 bg-blue-700 rounded mb-4"}),(0,a.jsx)("div",{className:"h-8 bg-blue-700 rounded mb-4"}),(0,a.jsx)("div",{className:"h-8 bg-blue-700 rounded mb-4"})]})]}),(0,a.jsx)("div",{className:"flex-1 p-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"},s))})]})})]}):t?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("div",{className:"".concat(W?"w-72":"w-0"," transition-all duration-300 bg-gradient-to-b from-blue-900 to-blue-800 text-white flex flex-col overflow-hidden"),children:[(0,a.jsxs)("div",{className:"p-6 border-b border-blue-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-8",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-2xl flex items-center justify-center shadow-lg",children:(0,a.jsx)(c.Z,{className:"h-8 w-8 text-blue-900"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-bold text-xl",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Church of Pentecost"}),(0,a.jsx)("p",{className:"text-blue-200 text-sm",children:"Emmanuel Assembly"}),(0,a.jsx)("p",{className:"text-yellow-300 text-xs font-medium",children:"Odorkor Area, Gbawe CP District"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 bg-blue-800/50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-400 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-900"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:t.full_name}),(0,a.jsx)("p",{className:"text-blue-200 text-sm capitalize",children:t.role})]})]})]}),(0,a.jsx)("nav",{className:"flex-1 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-blue-200 text-xs font-semibold uppercase tracking-wider mb-3 px-3",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Core Management"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg bg-blue-700 text-white shadow-sm",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Dashboard"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"/members",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Members"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"/visitors",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Visitors"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"/groups",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Groups"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Events"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Ministries"})]})})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-blue-200 text-xs font-semibold uppercase tracking-wider mb-3 px-3",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Attendance System"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"QR Scanner"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Kiosk Mode"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(f,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Manual Check-in"})]})})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-blue-200 text-xs font-semibold uppercase tracking-wider mb-3 px-3",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Financial"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Donations"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(y,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Payments"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(j,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Budget"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Reports"})]})})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-blue-200 text-xs font-semibold uppercase tracking-wider mb-3 px-3",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Communication"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"SMS"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Email"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Notifications"})]})})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"text-yellow-300 text-xs font-semibold uppercase tracking-wider mb-3 px-3 flex items-center",style:{fontFamily:'"Space Grotesk", sans-serif'},children:[(0,a.jsx)(k,{className:"h-4 w-4 mr-2"}),"AI Features"]}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(Z,{className:"h-5 w-5 text-yellow-400"}),(0,a.jsx)("span",{children:"Smart Insights"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(_,{className:"h-5 w-5 text-yellow-400"}),(0,a.jsx)("span",{children:"Analytics"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(M,{className:"h-5 w-5 text-yellow-400"}),(0,a.jsx)("span",{children:"Attendance AI"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(S.Z,{className:"h-5 w-5 text-yellow-400"}),(0,a.jsx)("span",{children:"Recommendations"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-blue-200 text-xs font-semibold uppercase tracking-wider mb-3 px-3",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Settings"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(F.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"General"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center space-x-3 p-3 rounded-lg text-blue-200 hover:bg-blue-700 hover:text-white transition-colors",children:[(0,a.jsx)(Y,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Security"})]})})]})]})]})}),(0,a.jsx)("div",{className:"p-4 border-t border-blue-700",children:(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("emmanuel_assembly_test_user"),window.location.href="/auth"},className:"flex items-center space-x-3 w-full p-3 rounded-lg text-blue-200 hover:bg-red-600 hover:text-white transition-colors",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Logout"})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>J(!W),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(D.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["Welcome, ",t.full_name]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(w.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-white"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t.role})]})]})]})}),(0,a.jsxs)("main",{className:"flex-1 p-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(i.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Total Members"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:(null==U?void 0:U.total_members)||0}),(0,a.jsxs)("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(0,a.jsx)(C.Z,{className:"h-3 w-3 mr-1"}),"↑5.2%"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-blue-600"})})]})})}),(0,a.jsx)(i.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Donations"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:["$",(null==U?void 0:null===(e=U.monthly_donations)||void 0===e?void 0:e.toLocaleString())||"0"]}),(0,a.jsxs)("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(0,a.jsx)(C.Z,{className:"h-3 w-3 mr-1"}),"↑12.7%"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"h-5 w-5 text-green-600"})})]})})}),(0,a.jsx)(i.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Events"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:((null==U?void 0:U.upcoming_birthdays)||0)+((null==U?void 0:U.upcoming_anniversaries)||0)}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:V.length>0?"Next: ".concat((null===(s=V[0])||void 0===s?void 0:s.type)==="birthday"?"Birthday":"Anniversary"):"No upcoming events"})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-purple-600"})})]})})}),(0,a.jsx)(i.Zb,{className:"bg-white shadow-sm border border-gray-100",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Active Groups"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",style:{fontFamily:'"Space Grotesk", sans-serif'},children:(null==U?void 0:U.total_members)||0}),(0,a.jsxs)("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(0,a.jsx)(C.Z,{className:"h-3 w-3 mr-1"}),"+3 new"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-yellow-600"})})]})})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",style:{fontFamily:'"Space Grotesk", sans-serif'},children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[(0,a.jsx)("a",{href:"/members",children:(0,a.jsx)(i.Zb,{className:"bg-white border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Members"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Manage profiles"})]})})})}),(0,a.jsx)("a",{href:"/visitors",children:(0,a.jsx)(i.Zb,{className:"bg-white border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-green-600"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Visitors"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Track visitors"})]})})})}),(0,a.jsx)("a",{href:"/groups",children:(0,a.jsx)(i.Zb,{className:"bg-white border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(c.Z,{className:"h-5 w-5 text-purple-600"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Groups"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Manage ministries"})]})})})}),(0,a.jsx)(i.Zb,{className:"bg-white border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-green-600"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Events"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Schedule events"})]})})}),(0,a.jsx)(i.Zb,{className:"bg-white border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(p.Z,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Donations"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Track giving"})]})})}),(0,a.jsx)(i.Zb,{className:"bg-white border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(v.Z,{className:"h-5 w-5 text-purple-600"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Messages"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Send SMS/Email"})]})})}),(0,a.jsx)(i.Zb,{className:"bg-white border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-50 rounded-lg flex items-center justify-center mb-3",children:(0,a.jsx)(c.Z,{className:"h-5 w-5 text-yellow-600"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Ministries"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Manage groups"})]})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(i.Zb,{className:"bg-white shadow-sm border-0",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl font-semibold text-gray-900",children:"Upcoming Events"}),(0,a.jsx)(i.SZ,{children:"Schedule for the week"})]}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Sunday Service"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Tomorrow, 8:00 AM"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Youth Meeting"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Wednesday, 6:00 PM"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Prayer Meeting"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Friday, 7:00 PM"})]})]})]})})]}),(0,a.jsxs)(i.Zb,{className:"bg-white shadow-sm border-0",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl font-semibold text-gray-900",children:"Upcoming Birthdays & Anniversaries"}),(0,a.jsx)(i.SZ,{children:"Celebrate with our members"})]}),(0,a.jsx)(i.aY,{children:0===V.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(E,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"No upcoming birthdays or anniversaries in the next 30 days"})]}):(0,a.jsx)("div",{className:"space-y-4",children:V.slice(0,6).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-12 h-12 ".concat((()=>{switch(e.type){case"birthday":return"bg-yellow-100";case"baptism_anniversary":return"bg-blue-100";case"holy_ghost_anniversary":return"bg-purple-100";default:return"bg-gray-100"}})()," rounded-lg flex items-center justify-center"),children:(()=>{switch(e.type){case"birthday":return(0,a.jsx)(E,{className:"h-6 w-6 text-yellow-600"});case"baptism_anniversary":return(0,a.jsx)(z,{className:"h-6 w-6 text-blue-600"});case"holy_ghost_anniversary":return(0,a.jsx)(Z,{className:"h-6 w-6 text-purple-600"});default:return(0,a.jsx)(h.Z,{className:"h-6 w-6 text-gray-600"})}})()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(()=>{switch(e.type){case"birthday":return"Birthday";case"baptism_anniversary":return"Baptism Anniversary";case"holy_ghost_anniversary":return"Holy Ghost Anniversary";default:return"Event"}})()," • ",e.displayDate,e.phone&&" • ".concat(e.phone)]})]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:0===e.daysUntil?"Today":1===e.daysUntil?"Tomorrow":"".concat(e.daysUntil," days")})]},s))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zb,{className:"bg-white shadow-sm border-0",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl font-semibold text-gray-900",children:"Gender Distribution"}),(0,a.jsx)(i.SZ,{children:"Member demographics by gender"})]}),(0,a.jsx)(i.aY,{children:q?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Male"})]}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:q.gender.male})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-pink-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Female"})]}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:q.gender.female})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-pink-500 h-2 rounded-full",style:{width:"".concat(q.gender.male+q.gender.female>0?q.gender.male/(q.gender.male+q.gender.female)*100:0,"%")}})})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Loading demographics..."})]})})]}),(0,a.jsxs)(i.Zb,{className:"bg-white shadow-sm border-0",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl font-semibold text-gray-900",children:"Age Distribution"}),(0,a.jsx)(i.SZ,{children:"Members by age groups"})]}),(0,a.jsx)(i.aY,{children:q?(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(q.ageGroups).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[s," years"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-yellow-500 h-2 rounded-full",style:{width:"".concat(Math.max(t/Math.max(...Object.values(q.ageGroups))*100,5),"%")}})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900 w-8 text-right",children:t})]})]},s)})}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Loading age data..."})]})})]}),(0,a.jsxs)(i.Zb,{className:"bg-white shadow-sm border-0",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl font-semibold text-gray-900",children:"Church Groups"}),(0,a.jsx)(i.SZ,{children:"Members by fellowship groups"})]}),(0,a.jsx)(i.aY,{children:q?(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(q.groups).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:s})]},s)})}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Loading groups..."})]})})]}),(0,a.jsxs)(i.Zb,{className:"bg-white shadow-sm border-0",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl font-semibold text-gray-900",children:"Marital Status"}),(0,a.jsx)(i.SZ,{children:"Family demographics"})]}),(0,a.jsx)(i.aY,{children:q?(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(q.maritalStatus).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 capitalize",children:s}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:t})]},s)})}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(G.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Loading status..."})]})})]})]})]})]})]})]}):null}},9477:function(e,s,t){"use strict";t.r(s),t.d(s,{Providers:function(){return d},useAuth:function(){return c}});var a=t(7437),l=t(2265),r=t(8346);let n=(0,l.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=()=>{let e=(0,r.b_)();e?(console.log("SimpleAuth: Found test user:",e),i(e)):(console.log("SimpleAuth: No test user found"),i(null)),d(!1)};e();let s=s=>{"emmanuel_assembly_test_user"===s.key&&(console.log("SimpleAuth: localStorage changed, checking user"),e())},t=e=>{console.log("SimpleAuth: testUserChanged event received:",e.detail),e.detail?i(e.detail):i(null)};return window.addEventListener("storage",s),window.addEventListener("testUserChanged",t),()=>{window.removeEventListener("storage",s),window.removeEventListener("testUserChanged",t)}},[]),(0,a.jsx)(n.Provider,{value:{user:t,loading:c,signOut:()=>{(0,r.oV)(),i(null),window.location.href="/auth"}},children:s})}function c(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useAuth must be used within a SimpleAuthProvider");return e}function d(e){let{children:s}=e;return(0,a.jsx)(i,{children:s})}},7815:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},ll:function(){return c}});var a=t(7437),l=t(2265),r=t(1657);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});c.displayName="CardTitle";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});d.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},8346:function(e,s,t){"use strict";t.d(s,{b_:function(){return r},i:function(){return l},oV:function(){return n}});let a="emmanuel_assembly_test_user";function l(e){localStorage.setItem(a,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("testUserChanged",{detail:e}))}function r(){try{let e=localStorage.getItem(a);return e?JSON.parse(e):null}catch(e){return null}}function n(){localStorage.removeItem(a),window.dispatchEvent(new CustomEvent("testUserChanged",{detail:null}))}},4599:function(e,s,t){"use strict";t.d(s,{e:function(){return l}});var a=t(2814);function l(){return(0,a.AY)("https://dsgewsnslfdylvieulsc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzZ2V3c25zbGZkeWx2aWV1bHNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwNTc0NjksImV4cCI6MjA3NDYzMzQ2OX0.vCUQKVpsdzI9c_a4zfvKtHLPpLWRBlZxKkA5AiajnqE")}},1657:function(e,s,t){"use strict";t.d(s,{Fw:function(){return d},cn:function(){return r},o0:function(){return i},p6:function(){return n},tC:function(){return o},un:function(){return c}});var a=t(7042),l=t(4769);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.m6)((0,a.W)(s))}function n(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function i(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function c(e){let s=e.replace(/\D/g,"");return s.startsWith("233")?"+".concat(s.slice(0,3)," ").concat(s.slice(3,6)," ").concat(s.slice(6,9)," ").concat(s.slice(9)):s.startsWith("0")?"+233 ".concat(s.slice(1,4)," ").concat(s.slice(4,7)," ").concat(s.slice(7)):e}function d(e){let s=new Date,t=new Date(e),a=s.getFullYear()-t.getFullYear(),l=s.getMonth()-t.getMonth();return(l<0||0===l&&s.getDate()<t.getDate())&&a--,a}function o(e){if(!e)return"";let s=function(e){if(!e)return"";let s=e.replace(/[^A-Za-z0-9-]/g,"").toUpperCase();if(/^EA-\d{4}-\d{4}$/.test(s))return s;if(/^\d{8}$/.test(s))return"EA-".concat(s.slice(0,4),"-").concat(s.slice(4));if(s.startsWith("EA")){let e=s.replace(/[^0-9]/g,"");if(8===e.length)return"EA-".concat(e.slice(0,4),"-").concat(e.slice(4))}return s}(e);return/^EA-\d{4}-\d{4}$/.test(s)?s:e}}},function(e){e.O(0,[895,833,971,938,744],function(){return e(e.s=655)}),_N_E=e.O()}]);